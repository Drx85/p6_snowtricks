{% extends 'base.html.twig' %}

{% block title 'Accueil' %}

{% block body %}
	
	<div class="container text-center mt-4">
		<h1>Bienvenue sur Snowtricks</h1>
	</div>
	
	<div class="container">
		<h2>Tous les tricks</h2>
		
		{% for message in app.flashes('success') %}
			<div class="alert alert-success">
				{{ message }}
			</div>
		{% endfor %}
		
		{% if is_granted('ROLE_ADMIN') %}
		<a href="{{ path('admin.trick.new') }}" class="btn btn-primary mt-2 mb-4">Cr√©er un nouveau trick</a>
		{% endif %}
		<div class="row flex">
			{% for trick in tricks %}
				<div class="col-3">
					<div class="card">
						<div class="card-body">
							<h5 class="card-title">
								<a href="{{ path('trick.show', {id: trick.id, slug: trick.slug}) }}">{{ trick.title }}</a>
								{% if is_granted('ROLE_ADMIN') %}
								<a href="{{ path('admin.trick.edit', {id: trick.id}) }}"><i class="far fa-edit"></i></a>
								<form method="post" action="{{ path('admin.trick.delete', {id: trick.id}) }}" onsubmit="return confirm('Confirmer la suppression ?')">
									<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ trick.id) }}">
									<button><i class="far fa-trash-alt"></i></button>
								</form>
								{% endif %}
							</h5>
							<p class="card-text">{{ trick.description | nl2br }}</p>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>

{% endblock %}